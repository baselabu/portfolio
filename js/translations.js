// Translation system for English/Norwegian
export const translations = {
  en: {
    nav: {
      about: "About",
      experience: "Experience", 
      projects: "Projects",
      education: "Education",
      contact: "Contact",
      resume: "Resume"
    },
    hero: {
      name: "Basel Abu Sablih",
      title: "Computer Science Student",
      subtitle: "Computer Science — building reliable software with clean code and measurable impact.",
      viewProjects: "View Projects",
      contactMe: "Contact Me",
      downloadCV: "Download CV",
      scrollDown: "↓"
    },
    about: {
      title: "About Me",
      description: "I'm studying Bachelor in Computer Science at University of Stavanger. I'm planning to enter Data Science in Masters next year because I'm really into AI and I would love how it makes our lives easier day by day.",
      skills: "Main Skills",
      skillList: [
        "Web Development (HTML, JavaScript, CSS, Python)",
        ".NET C#",
        "Databases", 
        "Cybersecurity"
      ]
    },
    experience: {
      title: "Work Experience",
      subtitle: "what i did in my work experience",
      items: [
        {
          role: "Store Associate",
          company: "MENY (Kuben), Hønefoss",
          period: "Nov. 2022 – Present",
          bullets: [
            "Daily customer service and cashier work with high traffic.",
            "Responsible for product restocking and maintaining clean store layout.",
            "Efficiently handle various customer needs and product types."
          ]
        },
        {
          role: "Security Guard",
          company: "Kistefoss, Jevnaker",
          period: "May 2024 – Sep. 2024",
          bullets: [
            "Contributed to safe and organized execution of events.",
            "Communicated clearly with visitors and team as needed."
          ]
        },
        {
          role: "Tourist Guide",
          company: "Glassverket, Jevnaker",
          period: "July 2022 – Aug. 2022",
          bullets: [
            "Guided and informed tourists about attractions and activities.",
            "Ensured good experiences at various stations."
          ]
        },
        {
          role: "After School Care Assistant",
          company: "Toso School, Jevnaker",
          period: "June 2021 – July 2022",
          bullets: [
            "Supervision and activities for children in after school care.",
            "Facilitated safe and good relationships in daily life."
          ]
        }
      ]
    },
    projects: {
      title: "Projects",
      subtitle: "Selected work with quick demos and source links.",
      items: [
        {
          name: "Calculator",
          description: "Simple calculator built during learning process (C# console).",
          tech: ["C#"]
        },
        {
          name: "Guessing Number Game", 
          description: "Console number guessing game (C#).",
          tech: ["C#"]
        }
      ]
    },
    education: {
      title: "Education — University of Stavanger",
      subtitle: "what i did in each semester",
      university: "University of Stavanger",
      degree: "Bachelor in Computer Science",
      semesters: {
        "1": "First Year, Semester 1",
        "2": "First Year, Semester 2", 
        "3": "Second Year, Semester 3",
        "4": "Second Year, Semester 4",
        "5": "Third Year, Semester 5",
        "6": "Third Year, Semester 6"
      }
    },
    contact: {
      title: "Contact",
      info: "For opportunities and collaboration, reach me at baseltv11@gmail.com. Connect on LinkedIn.",
      form: {
        email: "Your email",
        subject: "Subject", 
        message: "Message",
        emailPlaceholder: "you@example.com",
        subjectPlaceholder: "Topic",
        messagePlaceholder: "Write your message...",
        send: "Send",
        seeWork: "See My Work",
        downloadCV: "Download CV"
      }
    },
    resume: {
      title: "Resume",
      subtitle: "Download my CV or view it online",
      view: "View CV",
      download: "Download PDF"
    },
    footer: {
      copyright: "© 2024 Basel Abu Sablih. All rights reserved."
    },
    modal: {
      close: "Close",
      download: "Download PDF"
    }
  },
  no: {
    nav: {
      about: "Om meg",
      experience: "Erfaring",
      projects: "Prosjekter", 
      education: "Utdanning",
      contact: "Kontakt",
      resume: "CV"
    },
    hero: {
      name: "Basel Abu Sablih",
      title: "Datateknologi Student",
      subtitle: "Datateknologi — bygger pålitelig programvare med ren kode og målbar påvirkning.",
      viewProjects: "Se Prosjekter",
      contactMe: "Kontakt meg",
      downloadCV: "Last ned CV",
      scrollDown: "↓"
    },
    about: {
      title: "Om meg",
      description: "Jeg studerer Bachelor i Datateknologi ved Universitetet i Stavanger. Jeg planlegger å gå inn i Data Science på Master neste år fordi jeg er virkelig interessert i AI og jeg vil gjerne se hvordan det gjør livene våre enklere dag for dag.",
      skills: "Hovedferdigheter",
      skillList: [
        "Webutvikling (HTML, JavaScript, CSS, Python)",
        ".NET C#",
        "Databaser",
        "Cybersikkerhet"
      ]
    },
    experience: {
      title: "Arbeidserfaring",
      subtitle: "hva jeg gjorde i min arbeidserfaring",
      items: [
        {
          role: "Butikkmedarbeider",
          company: "MENY (Kuben), Hønefoss",
          period: "Nov. 2022 – Nåværende",
          bullets: [
            "Daglig kundeservice og kassearbeid med høy trafikk.",
            "Ansvar for varepåfylling og ryddig butikklayout.",
            "Håndterer ulike kundebehov og produkttyper effektivt."
          ]
        },
        {
          role: "Vakt",
          company: "Kistefoss, Jevnaker",
          period: "Mai 2024 – Sep. 2024",
          bullets: [
            "Bidro til sikker og ryddig gjennomføring av arrangementer.",
            "Kommuniserte tydelig med besøkende og team ved behov."
          ]
        },
        {
          role: "Turistvert",
          company: "Glassverket, Jevnaker",
          period: "Juli 2022 – Aug. 2022",
          bullets: [
            "Veiledet og informerte turister om attraksjoner og aktiviteter.",
            "Sørget for gode opplevelser på ulike stasjoner."
          ]
        },
        {
          role: "SFO-assistent",
          company: "Toso skole, Jevnaker",
          period: "Juni 2021 – Juli 2022",
          bullets: [
            "Tilsyn og aktiviteter for barn i SFO.",
            "La til rette for trygge og gode relasjoner i hverdagen."
          ]
        }
      ]
    },
    projects: {
      title: "Prosjekter",
      subtitle: "Utvalgt arbeid med raske demos og kildekoder.",
      items: [
        {
          name: "Kalkulator",
          description: "Enkel kalkulator bygget under læringsprosessen (C# konsoll).",
          tech: ["C#"]
        },
        {
          name: "Gjett Tallet Spill",
          description: "Konsoll tallgjettingsspill (C#).",
          tech: ["C#"]
        }
      ]
    },
    education: {
      title: "Utdanning — Universitetet i Stavanger",
      subtitle: "hva jeg gjorde i hvert semester",
      university: "Universitetet i Stavanger",
      degree: "Bachelor i Datateknologi",
      semesters: {
        "1": "Første år, semester 1",
        "2": "Første år, semester 2",
        "3": "Andre år, semester 3", 
        "4": "Andre år, semester 4",
        "5": "Tredje år, semester 5",
        "6": "Tredje år, semester 6"
      }
    },
    contact: {
      title: "Kontakt",
      info: "For muligheter og samarbeid, kontakt meg på baseltv11@gmail.com. Koble til på LinkedIn.",
      form: {
        email: "Din e-post",
        subject: "Emne",
        message: "Melding",
        emailPlaceholder: "din@epost.no",
        subjectPlaceholder: "Emne",
        messagePlaceholder: "Skriv din melding...",
        send: "Send",
        seeWork: "Se mitt arbeid",
        downloadCV: "Last ned CV"
      }
    },
    resume: {
      title: "CV",
      subtitle: "Last ned min CV eller se den online",
      view: "Se CV",
      download: "Last ned PDF"
    },
    footer: {
      copyright: "© 2024 Basel Abu Sablih. Alle rettigheter forbeholdt."
    },
    modal: {
      close: "Lukk",
      download: "Last ned PDF"
    }
  }
};

// Translation utility functions
export function getTranslation(key, lang = 'en') {
  const keys = key.split('.');
  let value = translations[lang];
  
  for (const k of keys) {
    value = value?.[k];
  }
  
  return value || key;
}

// Re-render dynamic content when language changes
function reRenderDynamicContent(lang) {
  // Re-render experiences
  const expItems = translations[lang].experience.items;
  if (window.renderExperiences) {
    window.renderExperiences(expItems, lang);
  }
  
  // Re-render projects
  const projItems = translations[lang].projects.items;
  if (window.renderProjects) {
    window.renderProjects(projItems, lang);
  }
  
  // Re-render education
  if (window.renderEducationTree) {
    window.renderEducationTree(lang);
  }
}

export function setupTranslation() {
  const langToggle = document.getElementById('lang-toggle');
  const currentLang = localStorage.getItem('language') || 'en';
  
  // Apply initial language
  applyLanguage(currentLang);
  
  if (langToggle) {
    langToggle.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-lang') || 'en';
      const next = current === 'en' ? 'no' : 'en';
      applyLanguage(next);
      localStorage.setItem('language', next);
    });
  }
}

function applyLanguage(lang) {
  document.documentElement.setAttribute('data-lang', lang);
  
  // Update all elements with data-translate attribute
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    const translation = getTranslation(key, lang);
    
    if (element.tagName === 'INPUT' && element.type === 'text') {
      element.placeholder = translation;
    } else if (element.tagName === 'TEXTAREA') {
      element.placeholder = translation;
    } else {
      element.textContent = translation;
    }
  });
  
  // Update all elements with data-translate-placeholder attribute
  document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
    const key = element.getAttribute('data-translate-placeholder');
    const translation = getTranslation(key, lang);
    element.placeholder = translation;
  });
  
  // Re-render dynamic content
  reRenderDynamicContent(lang);
  
  // Update language toggle button
  const langToggle = document.getElementById('lang-toggle');
  if (langToggle) {
    langToggle.textContent = lang === 'en' ? '🇳🇴' : '🇪🇳';
    langToggle.title = lang === 'en' ? 'Switch to Norwegian' : 'Switch to English';
  }
}
